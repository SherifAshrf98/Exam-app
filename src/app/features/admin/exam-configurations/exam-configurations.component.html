<p-toast></p-toast>
<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <p-card header="Exam Configuration" styleClass="mb-4">
        @if (loading) {
        <div class="d-flex justify-content-center my-4">
          <p-progressSpinner styleClass="w-3rem h-3rem"></p-progressSpinner>
        </div>
        }
        <form *ngIf="selectedSubject && !loading" [formGroup]="form" (ngSubmit)="saveConfig()">
          <div class="mb-3">
            <label class="form-label">Subject</label>
            <div class="fw-bold">{{ selectedSubject.name }}</div>
          </div>
          <div class="mb-3">
            <label for="numEasy" class="form-label">Number of Easy Questions</label>
            <p-inputNumber formControlName="numEasy" inputId="numEasy" [min]="0" class="w-100"></p-inputNumber>
            <small *ngIf="form.get('numEasy')?.invalid && form.get('numEasy')?.touched" class="p-error">Required and
              must be >= 0</small>
          </div>
          <div class="mb-3">
            <label for="numMedium" class="form-label">Number of Medium Questions</label>
            <p-inputNumber formControlName="numMedium" inputId="numMedium" [min]="0" class="w-100"></p-inputNumber>
            <small *ngIf="form.get('numMedium')?.invalid && form.get('numMedium')?.touched" class="p-error">Required and
              must be >= 0</small>
          </div>
          <div class="mb-3">
            <label for="numHard" class="form-label">Number of Hard Questions</label>
            <p-inputNumber formControlName="numHard" inputId="numHard" [min]="0" class="w-100"></p-inputNumber>
            <small *ngIf="form.get('numHard')?.invalid && form.get('numHard')?.touched" class="p-error">Required and
              must be >= 0</small>
          </div>
          <div class="mb-3">
            <label for="duration" class="form-label">Duration (minutes)</label>
            <p-inputNumber formControlName="duration" inputId="duration" [min]="0" class="w-100"></p-inputNumber>
            <small *ngIf="form.get('duration')?.invalid && form.get('duration')?.touched" class="p-error">Required and
              must be >= 0</small>
          </div>
          <div class="d-flex gap-2 mt-3">
            <button pButton type="submit" label="Save" class="p-button-success"></button>
            <button pButton type="button" label="Cancel" class="p-button-secondary" (click)="cancelConfig()"></button>
          </div>
        </form>
        @if(!selectedSubject && !loading){
        <div *ngIf="!selectedSubject && !loading">
          <label for="subjectSelect" class="form-label">Select Subject</label>
          <p-select [options]="subjects" optionLabel="name" placeholder="Select a subject" [(ngModel)]="selectedSubject"
            (onChange)="onSubjectSelect($event.value)" [showClear]="true" inputId="subjectSelect"
            styleClass="w-100 mb-3"></p-select>
        </div>
        }
      </p-card>
    </div>
  </div>
</div>