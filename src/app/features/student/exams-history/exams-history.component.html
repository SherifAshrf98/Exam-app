<div class="exams-history p-4">
  @if (loading) {
    <div class="blur-overlay">
      <p-progressSpinner></p-progressSpinner>
    </div>
  }
  <div class="card p-4 shadow-sm rounded-4">
    <h4 class="fw-bold mb-4">My Exam History</h4>
    <p-table [value]="exams" class="p-datatable-sm rounded-3 overflow-hidden" [paginator]="false">
      <ng-template pTemplate="header">
        <tr>
          <th>SUBJECT</th>
          <th>SCORE</th>
          <th>DURATION</th>
          <th>DATE & TIME</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-exam>
        <tr>
          <td>{{ exam.subjectName }}</td>
          <td>
            <span [ngClass]="{
              'badge bg-success-subtle text-success': exam.score >= 50,
              'badge bg-danger-subtle text-danger': exam.score < 50
            }">
              {{ exam.score }}%
            </span>
          </td>
          <td>{{ exam.duration }} min</td>
          <td>{{ exam.startedAt | date:'yyyy-MM-dd HH:mm' }}</td>
        </tr>
      </ng-template>
    </p-table>
    <div class="d-flex justify-content-between align-items-center mt-2">
      <span>Showing {{ (page - 1) * pageSize + 1 }}-{{ min(page * pageSize, totalRecords) }} of {{ totalRecords }} exams</span>
      <p-paginator [rows]="pageSize" [totalRecords]="totalRecords" [first]="(page - 1) * pageSize" (onPageChange)="onPageChange($event)" [rowsPerPageOptions]="[5, 10, 20, 50]"></p-paginator>
    </div>
  </div>
</div>
